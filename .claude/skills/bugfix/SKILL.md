---
name: bugfix
description: 버그 수정 워크플로우. 원인 분석, 수정 계획, 회귀 테스트까지 체계적 버그 해결. "버그 수정", "에러 해결", "bugfix", "오류", "문제 해결" 키워드에 반응.
model: opus
---

# Fixing Bug - 버그 수정 스킬

## 역할

버그 수정의 전체 라이프사이클을 체계적으로 관리합니다.

**핵심 가치:**
- 원인 분석 문서화
- 재발 방지 대책 기록
- Why 기록으로 미래 참조 가능
- 회귀 테스트 체크리스트

## 워크플로우

```
[1. 증상 기록] → [2. 원인 분석] → [3. 수정 계획] → [4. 구현] → [5. 검증] → [6. 완료]
       │              │              │             │          │          │
   ANALYSIS.md     Root Cause      FIX.md       코드 수정   테스트    /done
     생성           분석            작성                              호출
```

## 실행 단계

### Step 1: 버그 폴더 생성

```bash
# 폴더 생성
mkdir -p docs/work/active/{버그명}/

# 필수 문서 생성
touch docs/work/active/{버그명}/README.md
touch docs/work/active/{버그명}/ANALYSIS.md
touch docs/work/active/{버그명}/FIX.md
```

**버그명 규칙:** `{영역}_{증상}` (예: `PassSchedule_Chart_Slow`)

### Step 2: README.md 작성

```markdown
# {버그명}

## 버그 정보

| 항목 | 내용 |
|------|------|
| **보고일** | YYYY-MM-DD |
| **심각도** | 🔴 Critical / 🟠 High / 🟡 Medium / 🟢 Low |
| **상태** | 🚧 분석중 / 🔧 수정중 / ✅ 완료 |
| **영향 범위** | {영향받는 기능/페이지} |

## 증상

{버그 증상 상세 설명}

## 재현 단계

1. ...
2. ...
3. ...

## 예상 결과 vs 실제 결과

- **예상**:
- **실제**:

## 관련 문서

- [ANALYSIS.md](ANALYSIS.md) - 원인 분석
- [FIX.md](FIX.md) - 수정 내용
```

### Step 3: ANALYSIS.md 작성 (원인 분석)

```markdown
# {버그명} 원인 분석

## 1. 증상 요약

{간단한 증상 설명}

## 2. 분석 과정

### 2.1 로그 분석
```
{관련 로그 또는 에러 메시지}
```

### 2.2 코드 추적
| 순서 | 파일 | 함수/메서드 | 설명 |
|------|------|-----------|------|
| 1 | | | |
| 2 | | | |

### 2.3 데이터 흐름
```
{입력} → [처리 1] → [처리 2] → {문제 발생 지점}
```

## 3. 근본 원인 (Root Cause)

**원인**: {왜 이 버그가 발생했는가}

**Why 분석 (5 Whys):**
1. Why? →
2. Why? →
3. Why? →
4. Why? →
5. Why? → **근본 원인**

## 4. 영향 범위

| 영역 | 영향 여부 | 설명 |
|------|----------|------|
| Backend | ✅/❌ | |
| Frontend | ✅/❌ | |
| Algorithm | ✅/❌ | |
| 다른 기능 | ✅/❌ | |

## 5. 관련 파일

| 파일 | 역할 | 수정 필요 |
|------|------|----------|
| | | ✅/❌ |
```

### Step 4: FIX.md 작성 (수정 계획)

```markdown
# {버그명} 수정 계획

## 1. 수정 방안

### 선택한 방안
{어떻게 수정할 것인가}

### 대안 분석
| 방안 | 장점 | 단점 | 선택 |
|------|------|------|------|
| 방안 A | | | ❌ |
| 방안 B | | | ✅ |

## 2. 수정 내용

### 2.1 파일별 변경사항

#### {파일1}
```diff
- 변경 전 코드
+ 변경 후 코드
```

**Why**: {왜 이렇게 수정했는가}

#### {파일2}
...

## 3. 테스트 계획

### 3.1 수정 확인
- [ ] 버그 증상 해결 확인
- [ ] 재현 단계 다시 실행

### 3.2 회귀 테스트
- [ ] 관련 기능 정상 작동
- [ ] 다른 기능 영향 없음
- [ ] 빌드 성공

### 3.3 엣지 케이스
- [ ] {케이스 1}
- [ ] {케이스 2}

## 4. 재발 방지 대책

| 대책 | 적용 여부 |
|------|----------|
| 단위 테스트 추가 | ✅/❌ |
| 입력 검증 강화 | ✅/❌ |
| 문서 업데이트 | ✅/❌ |
| 코딩 가이드 추가 | ✅/❌ |
```

### Step 5: 구현 및 검증

```yaml
구현:
  - 호출 에이전트: debugger, be-expert, fe-expert
  - FIX.md에 따라 코드 수정

검증:
  - 호출 에이전트: test-expert
  - 테스트 계획 체크리스트 실행
```

### Step 6: 완료 처리

**자동 호출:** `/done` 스킬

```yaml
수행 작업:
  1. ANALYSIS.md + FIX.md 최종 정리
  2. work/active/ → work/archive/ 이동
  3. 관련 architecture/context/ 문서 업데이트 (해당시)
  4. logs/ 로그 기록
  5. 재발 방지 대책 적용 확인
```

## 참조 파일

- **스킬 연계:** [../done/SKILL.md](../done/SKILL.md)
- **디버깅 에이전트:** [../../agents/debugger.md](../../agents/debugger.md)

## 호출 에이전트

| 에이전트 | 역할 | 호출 시점 |
|---------|------|---------|
| `debugger` | 원인 분석 | ANALYSIS.md 작성 |
| `be-expert` | Backend 수정 | 구현 단계 |
| `fe-expert` | Frontend 수정 | 구현 단계 |
| `test-expert` | 테스트 실행 | 검증 단계 |
| `doc-syncer` | 문서 동기화 | 완료 시 |

## 심각도 분류

| 레벨 | 이모지 | 기준 | 대응 |
|------|-------|------|------|
| Critical | 🔴 | 시스템 다운, 데이터 손실 | 즉시 수정 |
| High | 🟠 | 주요 기능 불가 | 당일 수정 |
| Medium | 🟡 | 기능 제한, 우회 가능 | 이번 주 수정 |
| Low | 🟢 | 경미한 불편 | 백로그 |

## 사용 예시

### 예시 1: 성능 버그

```
사용자: "PassSchedule 차트가 너무 느려"

→ /bugfix 워크플로우 시작:

[폴더 생성] docs/work/active/PassSchedule_Chart_Slow/
            - README.md (심각도: 🟠 High)
            - ANALYSIS.md
            - FIX.md

[원인 분석] debugger 에이전트 호출
            - 로그 분석: 렌더링 4초
            - 코드 추적: 모든 데이터 매 프레임 재계산
            - Root Cause: 불필요한 computed 재평가

[수정 계획] FIX.md 작성
            - 방안: computed 결과 캐싱
            - 테스트: 렌더링 시간 1초 이하

[구현] fe-expert 에이전트 호출
       - watchEffect → computed + shallowRef 변경

[검증] test-expert 에이전트 호출
       - 렌더링 시간: 4s → 0.8s ✅
       - 회귀 테스트 통과 ✅

[완료] /done 자동 호출
       - work/archive/ 이동
       - 재발 방지: 성능 가이드라인 문서화
```

### 예시 2: 로직 버그

```
사용자: "위성 추적 시 고도각이 음수로 표시돼"

→ /bugfix 워크플로우 시작:

[분석] ANALYSIS.md
       - 증상: 고도각 -5° 표시
       - Root Cause: 라디안→도 변환 시 부호 오류

[수정] FIX.md
       - Math.toDegrees() 호출 위치 수정
       - 단위 테스트 추가

[완료] work/archive/로 이동
```

## 트러블슈팅

### Q: 원인을 못 찾겠어요
A: debugger 에이전트에게 더 자세한 로그와 재현 단계 제공. 5 Whys 기법 활용.

### Q: 수정했는데 다른 곳이 망가졌어요
A: FIX.md의 "영향 범위" 재분석. 회귀 테스트 체크리스트 확장.

### Q: 같은 버그가 반복돼요
A: ANALYSIS.md의 "재발 방지 대책" 강화. ADR 생성 검토.

---

**스킬 버전:** 1.0.0
**작성일:** 2026-01-06
**호환:** ACS 프로젝트 전용
