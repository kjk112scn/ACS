# 2026-01-08 (ìˆ˜) ì¼ì¼ ì‘ì—… ë¡œê·¸

## ì™„ë£Œëœ ì‘ì—…

### 1. DataStoreService TrackingCMD ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë²„ê·¸ ìˆ˜ì •

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìœ í˜• | Bugfix |
| íŒŒì¼ | `backend/src/main/kotlin/.../service/datastore/DataStoreService.kt` |

**Why**: TRACKING ìƒíƒœì—ì„œ `shouldPreserveCmdValue` ë¡œì§ì´ UDP í•˜ë“œì›¨ì–´ ê°’ì„ ì°¨ë‹¨í•˜ì—¬ TrackingCMDê°€ ê³ ì •ê°’ìœ¼ë¡œ í‘œì‹œë˜ë˜ ë¬¸ì œ í•´ê²°.

**ë³€ê²½ ë‚´ìš©:**
- `shouldPreserveCmdValue` ì¡°ê±´ ì œê±° - UDP í•˜ë“œì›¨ì–´ ê°’ ì¦‰ì‹œ ë°˜ì˜
- `forceUpdate` íŒŒë¼ë¯¸í„° ì œê±° (ë¶ˆí•„ìš”í•´ì§)
- 39ì¤„ ì œê±°, ì½”ë“œ ë‹¨ìˆœí™”

### 2. EphemerisService forceUpdate íŒŒë¼ë¯¸í„° ì œê±°

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìœ í˜• | Refactor |

| íŒŒì¼ | `backend/src/main/kotlin/.../service/mode/EphemerisService.kt` |

**Why**: DataStoreServiceì—ì„œ `forceUpdate` íŒŒë¼ë¯¸í„°ê°€ ì œê±°ë¨ì— ë”°ë¼ ì—°ê´€ í˜¸ì¶œ ì •ë¦¬.

### 3. ICDService ë””ë²„ê·¸ ë¡œê¹… ì œê±°

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìœ í˜• | Cleanup |
| íŒŒì¼ | `backend/src/main/kotlin/.../service/icd/ICDService.kt` |

**Why**: ê°œë°œ ì¤‘ ì¶”ê°€í–ˆë˜ 5ì´ˆ ê°„ê²© Tracking CMD ë¡œê¹… ì½”ë“œ ì œê±° (í”„ë¡œë•ì…˜ ë¶ˆí•„ìš”).

### 4. ICDService trackingCMD offset ë³µì›

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìœ í˜• | Bugfix |
| íŒŒì¼ | `backend/src/main/kotlin/.../service/icd/ICDService.kt` |

**Why**: ì´ì „ì— ì œê±°ë˜ì—ˆë˜ trackingCMD offset ì ìš© ë¡œì§ì„ ë³µì›. í•˜ë“œì›¨ì–´ì—ì„œ ë°›ì€ CMD ê°’ì— position offsetì„ ì ìš©í•´ì•¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì˜¬ë°”ë¥¸ ê°’ì´ í‘œì‹œë¨.

**ë³€ê²½ ë‚´ìš©:**
```kotlin
trackingCMDAzimuthAngle = it.trackingCMDAzimuthAngle + GlobalData.Offset.azimuthPositionOffset
trackingCMDElevationAngle = it.trackingCMDElevationAngle + GlobalData.Offset.elevationPositionOffset
trackingCMDTrainAngle = it.trackingCMDTiltAngle + GlobalData.Offset.trainPositionOffset + GlobalData.Offset.trueNorthOffset
```

### 5. PassSchedule ì˜¤ë²„ë© ì„ íƒ ë²„ê·¸ ìˆ˜ì •

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìœ í˜• | Bugfix (Critical) |
| íŒŒì¼ | `frontend/src/components/content/SelectScheduleContent.vue` |

**Why**: ì‹œê°„ì´ ê²¹ì¹˜ëŠ” ìŠ¤ì¼€ì¤„ë“¤ì´ ë™ì‹œì— ì„ íƒ ê°€ëŠ¥í–ˆë˜ ë²„ê·¸ ìˆ˜ì •.

**ë²„ê·¸ ì›ì¸ ë¶„ì„:**
1. **1ì°¨ ë¬¸ì œ**: `overlappingGroups`ê°€ `schedule.no` ì‚¬ìš© - ì •ë ¬ í›„ ì¬í• ë‹¹ë˜ëŠ” UI ì¸ë±ìŠ¤
2. **2ì°¨ ë¬¸ì œ**: q-table `v-model:selected` ì–‘ë°©í–¥ ë°”ì¸ë”© - í–‰ í´ë¦­ ì‹œ ê²€ì¦ ìš°íšŒ

**ìˆ˜ì • ë‚´ìš©:**
- ì˜¤ë²„ë© ì²´í¬ ê¸°ì¤€ì„ `no` â†’ `mstId`ë¡œ ë³€ê²½ (ì•ˆì •ì ì¸ ê³ ìœ  ID)
- `v-model:selected` â†’ `:selected` + `@update:selected` ë¶„ë¦¬
- `handleSelectionUpdate()` í•¨ìˆ˜ ì¶”ê°€ - ëª¨ë“  ì„ íƒì— ê²€ì¦ ì ìš©
- 184ì¤„ ë³€ê²½ (+136, -110)

---

## ì§„í–‰ ì¤‘ ì‘ì—… (ì°¨ì£¼ ê³„ì†)

### PassSchedule State Machine ë¦¬íŒ©í† ë§

| í•­ëª© | ë‚´ìš© |
|------|------|
| ìƒíƒœ | ğŸš§ ì§„í–‰ ì¤‘ (ë¯¸ì™„ì„±) |
| í´ë” | `docs/work/active/PassSchedule_State_Machine_Refactoring/` |
| íŒŒì¼ | `PassScheduleService.kt`, `PassScheduleController.kt` |

**í˜„ì¬ ìƒí™©:**
- ëŒ€ê·œëª¨ ë¦¬íŒ©í† ë§ ì§„í–‰ ì¤‘ (+989ì¤„)
- ì•„ì§ ì •ìƒ ë™ì‘í•˜ì§€ ì•ŠìŒ
- ì°¨ì£¼ì— ê°œì„  ì˜ˆì •

---

## ì»¤ë°‹ ëª©ë¡

| ì‹œê°„ | ì»¤ë°‹ | ë©”ì‹œì§€ |
|------|------|--------|
| - | d3140ca | fix(passschedule): ì˜¤ë²„ë© ìŠ¤ì¼€ì¤„ ì¤‘ë³µ ì„ íƒ ë²„ê·¸ ìˆ˜ì • |
| - | c13d48e | fix(icd): trackingCMD offset ì ìš© ë³µì› |
| - | (ì˜ˆì •) | wip(passschedule): State Machine ë¦¬íŒ©í† ë§ ì§„í–‰ ì¤‘ |

---

## ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

### PassSchedule MstId êµ¬ì¡° ì •ë¦¬

```
SatelliteID: ìœ„ì„± ì¹´íƒˆë¡œê·¸ ë²ˆí˜¸ (ì˜ˆ: "25544" ISS)
MstId: íŒ¨ìŠ¤ë³„ ì „ì—­ ì‹œí€€ìŠ¤ ì¸ë±ìŠ¤ (ëª¨ë“  ìœ„ì„±ì— ê±¸ì³ 1, 2, 3...)
DetailId: íŒ¨ìŠ¤ ë‚´ ì‹œê°„ í¬ì¸íŠ¸ ì¸ë±ìŠ¤
no: UI í‘œì‹œìš© ì¸ë±ìŠ¤ (ì •ë ¬ í›„ ì¬í• ë‹¹ë¨ - ê²€ì¦ì— ì‚¬ìš© ë¶ˆê°€)
```

### q-table ì„ íƒ ê²€ì¦ íë¦„

```
[Before] ì²´í¬ë°•ìŠ¤ í´ë¦­ â†’ handleCheckboxChange() â†’ ê²€ì¦ O
         í–‰ í´ë¦­ â†’ v-model ì§ì ‘ ìˆ˜ì • â†’ ê²€ì¦ X (ë²„ê·¸)

[After]  ì²´í¬ë°•ìŠ¤/í–‰ í´ë¦­ â†’ @update:selected â†’ handleSelectionUpdate() â†’ ê²€ì¦ O
```

---

**ì‘ì„±**: Claude Code
**ì‹œê°„**: 2026-01-08
