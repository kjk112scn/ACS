# ============================================
# with-db 프로필: TimescaleDB 사용
# ============================================
# 사용법: 기본값으로 설정됨
# 또는 실행 시: java -jar app.jar --spring.profiles.active=with-db

# ===========================================
# 공통 DB 연결 정보 (한 곳에서 관리)
# ===========================================
acs.db.host=localhost
acs.db.port=5432
acs.db.name=acs
acs.db.username=acs_user
acs.db.password=acs1234

# ===========================================
# Flyway (스키마 마이그레이션 - JDBC 직접 연결)
# ===========================================
# WebFlux 환경에서는 DataSource 자동 구성이 안 되므로
# Flyway 전용 URL을 직접 지정해야 함
spring.flyway.enabled=true
spring.flyway.url=jdbc:postgresql://localhost:5432/acs
spring.flyway.user=acs_user
spring.flyway.password=acs1234
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# ===========================================
# R2DBC (런타임 데이터 접근)
# ===========================================
# Timezone 정책: TIMESTAMPTZ는 내부 UTC 저장
# 애플리케이션: OffsetDateTime(UTC) 사용
# 사용자 표시: Frontend에서 IANA timezone 변환
spring.r2dbc.url=r2dbc:postgresql://${acs.db.host}:${acs.db.port}/${acs.db.name}
spring.r2dbc.username=${acs.db.username}
spring.r2dbc.password=${acs.db.password}
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=20
spring.r2dbc.pool.max-idle-time=30m

# ===========================================
# 데이터 보관 설정
# ===========================================
acs.database.retention-days=365
acs.database.icd-retention-days=90
